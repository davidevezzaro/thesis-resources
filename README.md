# Evaluation and comparison of layout-guided text-to-image diffusion models

This repository contains the resources developed during my master's thesis titled **"Evaluation and Comparison of Layout-Guided Text-to-Image Diffusion Models"**. The thesis presents a methodological approach to evaluate and compare layout-guided  diffusion models conditioned by bounding boxes.

This repository contains the resources developed for this study, specifically:

- **Two Prompts Collections**: Two sets of prompts covering different challening scenarios for image generation. Every item of the collection consists of a varying number of elements, each one annotated with a bounding box.
- **Generated Images**: A set of images generated using the aforementioned prompt collections and different generative models for results reproducibility purposes.

## Repository Contents

- `prompts/`: Directory containing two collections of text and layout prompts.
  - `short_prompt_collection.csv`: A small set of prompts (text+bounding boxes) and limited amount of scenarios used as an initial approach to build the larger ones.
  - `large_prompt_collection.csv`: A large set of prompts (text+bounding boxes) with broad variety of investigation scenarios used to effctively evaluate the models in the final comparison of the dissertation.

- `evaluation/`: Directory containing images generated by different diffusion models based on the provided prompts. Represents the exact directory structure needed to evaluate the images with the method developed.
  - `large_prompt_collection/`: Images generated the large prompt collection.
    - `large_prompt_collection-G/`: Images generated using GLIGEN.
    - `large_prompt_collection-G_AR/`: Images generated using GLIGEN + Attention Refocusing.
    - `large_prompt_collection-G_BD/`: Images generated using GLIGEN + BoxDiff
    - `large_prompt_collection-SD14/`: Images generated using StableDiffusion 1.4
    - `large_prompt_collection-SD_CAG/`: Images generated using StableDiffusion + Cross Attention Guidance
  - `short_prompt_collection/`: Images generated the short prompt collection.
    - `short_prompt_collection-G/`: Images generated using GLIGEN.
    - `short_prompt_collection-G_AR/`: Images generated using GLIGEN + Attention Refocusing.
    - `short_prompt_collection-G_BD/`: Images generated using GLIGEN + BoxDiff
    - `short_prompt_collection-SD14/`: Images generated using StableDiffusion 1.4
    - `short_prompt_collection-SD_CAG/`: Images generated using StableDiffusion + Cross Attention Guidance

- `evaluation_archives/`: Directory containing the data mentioned above but compressed into two archives:
  - `large_prompt_collection.txt`: Link to download the archive related to the large prompt collection data.
  - `short_prompt_collection.txt`: Link to download the archive related to the short prompt collection data.
  

## Purpose

This repository serves as a reference for researchers and practitioners interested in layout-guided text-to-image diffusion models. Moreover, it's useful to enable reproducibility and extendibility of this work.

## How to Use the Resources

1. **Prompts Collection**: The two prompt collections are intended to be used with layout-guided models that employ bounding boxes as conditioning mechanism 

2. **Generated Images**: The generated images in this repository can be used to test the evaluation pipeline presented in this thesis or to reproduce the results obtained in the final comparison.

3. **Generative models**: The aforementioned prompt collections can be tested with the generative models employed in this research, their adapted source code can be found at:
   - [Stable Diffusion 1.4](https://github.com/davidevezzaro/sd14-test)
   - [Cross Attention Guidance](https://github.com/davidevezzaro/layout-guidance-test)
   - [GLIGEN](https://github.com/davidevezzaro/gligen-test)
   - [BoxDiff](https://github.com/davidevezzaro/boxdiff-test)
   - [Attention Refocusing](https://github.com/davidevezzaro/attention-refocusing-test)

4. **Evaluation pipeline**: The generated images can evaluated using the proposed pipeline. The source code of the evaluation pipeline for layout-guided models adapated from [TIFA](https://github.com/Yushi-Hu/tifa) can be found at:
   - [Pipeline for layout-guided models](https://github.com/davidevezzaro/tifa-test)
  
5. **Thesis**: the dissertation of the entire project can be found [here](https://unipdit-my.sharepoint.com/:f:/g/personal/davide_vezzaro_4_studenti_unipd_it/ElDlfwwUfE9LldzDZZ8_ig4BoAo4443E4Y9KPU_RBKi6ow?e=fL0WIn).